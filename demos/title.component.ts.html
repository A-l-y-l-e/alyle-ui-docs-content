<div class="ttb"><pre class="ttm"><span class="tt18 tt1j">import</span> <span class="tt18 ttae">&#123;</span> Component<span class="tt18 ttae">,</span> OnInit<span class="tt18 ttae">,</span> ChangeDetectionStrategy<span class="tt18 ttae">,</span> ViewEncapsulation<span class="tt18 ttae">,</span> ChangeDetectorRef <span class="tt18 ttae">&#125;</span> <span class="tt18 tt1j">from</span> <span class="tt18 tt3z">'@angular/core'</span><span class="tt18 ttae">;</span>
<span class="tt18 tt1j">import</span> <span class="tt18 ttae">&#123;</span> Title <span class="tt18 ttae">&#125;</span> <span class="tt18 tt1j">from</span> <span class="tt18 tt3z">'@angular/platform-browser'</span><span class="tt18 ttae">;</span>
<span class="tt18 tt1j">import</span> <span class="tt18 ttae">&#123;</span> Platform<span class="tt18 ttae">,</span> LyTheme2 <span class="tt18 ttae">&#125;</span> <span class="tt18 tt1j">from</span> <span class="tt18 tt3z">'@alyle/ui'</span><span class="tt18 ttae">;</span>
<span class="tt18 tt1j">import</span> <span class="tt18 ttae">&#123;</span> environment <span class="tt18 ttae">&#125;</span> <span class="tt18 tt1j">from</span> <span class="tt18 tt3z">'@env/environment'</span><span class="tt18 ttae">;</span>
<span class="tt18 tt1j">import</span> <span class="tt18 ttae">&#123;</span> PageContentComponent <span class="tt18 ttae">&#125;</span> <span class="tt18 tt1j">from</span> <span class="tt18 tt3z">'../../page-content/page-content.component'</span><span class="tt18 ttae">;</span>
<span class="tt18 tt1j">import</span> <span class="tt18 ttae">&#123;</span> Location <span class="tt18 ttae">&#125;</span> <span class="tt18 tt1j">from</span> <span class="tt18 tt3z">'@angular/common'</span><span class="tt18 ttae">;</span>
<span class="tt18 tt1j">import</span> <span class="tt18 ttae">&#123;</span> Ads <span class="tt18 ttae">&#125;</span> <span class="tt18 tt1j">from</span> <span class="tt18 tt3z">'@sha<span style="background:red;color:white;opacity:1">red</span>/ads'</span><span class="tt18 ttae">;</span>
<span class="tt18 tt1j">import</span> <span class="tt18 ttae">&#123;</span> AUIRoutesMap <span class="tt18 ttae">&#125;</span> <span class="tt18 tt1j">from</span> <span class="tt18 tt3z">'@app/routes'</span><span class="tt18 ttae">;</span>

@<span class="tt18 tta3">Component</span><span class="tt18 ttae">(</span><span class="tt18 ttae">&#123;</span>
  selector<span class="tt18 ttae">:</span> <span class="tt18 tt3z">'app-title'</span><span class="tt18 ttae">,</span>
  templateUrl<span class="tt18 ttae">:</span> <span class="tt18 tt3z">'./title.component.html'</span><span class="tt18 ttae">,</span>
  changeDetection<span class="tt18 ttae">:</span> ChangeDetectionStrategy<span class="tt18 ttae">.</span>OnPush<span class="tt18 ttae">,</span>
  encapsulation<span class="tt18 ttae">:</span> ViewEncapsulation<span class="tt18 ttae">.</span>None
<span class="tt18 ttae">&#125;</span><span class="tt18 ttae">)</span>
<span class="tt18 tt1j">export</span> <span class="tt18 tt1j">class</span> <span class="tt18 ttc8">TitleComponent</span> <span class="tt18 tt1j">implements</span> <span class="tt18 ttc8">OnInit</span> <span class="tt18 ttae">&#123;</span>
  <span class="tt18 tt1j">private</span> _route<span class="tt18 ttae">:</span> <span class="tt18 ttcj">string</span><span class="tt18 ttae">;</span>
  title<span class="tt18 ttae">:</span> <span class="tt18 ttcj">string</span><span class="tt18 ttae">;</span>
  urls<span class="tt18 ttae">:</span> <span class="tt18 ttcj">string</span><span class="tt18 ttae">[</span><span class="tt18 ttae">]</span><span class="tt18 ttae">;</span>
  defaultTitle <span class="tt18 ttb0">=</span> <span class="tt18 tt3z">'Alyle UI'</span><span class="tt18 ttae">;</span>

  <span class="tt18 tt1j">set</span> <span class="tt18 tta3">route</span><span class="tt18 ttae">(</span><span class="tt18 parameter">val<span class="tt18 ttae">:</span> <span class="tt18 ttcj">string</span></span><span class="tt18 ttae">)</span> <span class="tt18 ttae">&#123;</span>
    <span class="tt18 tt1j">if</span> <span class="tt18 ttae">(</span>val <span class="tt18 ttb0">!==</span> <span class="tt18 tt1j">this</span><span class="tt18 ttae">.</span>route<span class="tt18 ttae">)</span> <span class="tt18 ttae">&#123;</span>
      val <span class="tt18 ttb0">=</span> <span class="tt18 tt1j">this</span><span class="tt18 ttae">.</span>_route <span class="tt18 ttb0">=</span> <span class="tt18 tt1j">this</span><span class="tt18 ttae">.</span>_location<span class="tt18 ttae">.</span><span class="tt18 tta3">path</span><span class="tt18 ttae">(</span><span class="tt18 ttae">)</span><span class="tt18 ttae">;</span>
      <span class="tt18 tt1j">if</span> <span class="tt18 ttae">(</span>AUIRoutesMap<span class="tt18 ttae">.</span><span class="tt18 tta3">has</span><span class="tt18 ttae">(</span>val<span class="tt18 ttae">)</span> <span class="tt18 ttb0">||</span> val<span class="tt18 ttae">.</span><span class="tt18 tta3">indexOf</span><span class="tt18 ttae">(</span><span class="tt18 tt3z">'/api/'</span><span class="tt18 ttae">)</span> <span class="tt18 ttb0">!==</span> <span class="tt18 ttb0">-</span><span class="tt18 ttap">1</span><span class="tt18 ttae">)</span> <span class="tt18 ttae">&#123;</span>
        <span class="tt18 tt1j">const</span> varArray <span class="tt18 ttb0">=</span> val<span class="tt18 ttae">.</span><span class="tt18 tta3">split</span><span class="tt18 ttae">(</span><span class="tt18 tt3z">'/'</span><span class="tt18 ttae">)</span><span class="tt18 ttae">.</span><span class="tt18 tta3">filter</span><span class="tt18 ttae">(</span><span class="tt18 parameter">_</span> <span class="tt18 ttb0">=></span> <span class="tt18 ttb0">!</span><span class="tt18 ttb0">!</span>_<span class="tt18 ttae">)</span><span class="tt18 ttae">;</span>
        <span class="tt18 tt1j">const</span> latestItem <span class="tt18 ttb0">=</span> varArray<span class="tt18 ttae">[</span>varArray<span class="tt18 ttae">.</span>length <span class="tt18 ttb0">-</span> <span class="tt18 ttap">1</span><span class="tt18 ttae">]</span><span class="tt18 ttae">;</span>
        <span class="tt18 tt1j">this</span><span class="tt18 ttae">.</span>urls <span class="tt18 ttb0">=</span> varArray<span class="tt18 ttae">.</span><span class="tt18 tta3">map</span><span class="tt18 ttae">(</span><span class="tt18 parameter">_</span> <span class="tt18 ttb0">=></span> _<span class="tt18 ttae">.</span><span class="tt18 tta3">charAt</span><span class="tt18 ttae">(</span><span class="tt18 ttap">0</span><span class="tt18 ttae">)</span><span class="tt18 ttae">.</span><span class="tt18 tta3">toUpperCase</span><span class="tt18 ttae">(</span><span class="tt18 ttae">)</span> <span class="tt18 ttb0">+</span> _<span class="tt18 ttae">.</span><span class="tt18 tta3">slice</span><span class="tt18 ttae">(</span><span class="tt18 ttap">1</span><span class="tt18 ttae">)</span><span class="tt18 ttae">)</span><span class="tt18 ttae">;</span>
        <span class="tt18 tt1j">this</span><span class="tt18 ttae">.</span>title <span class="tt18 ttb0">=</span> <span class="tt18 tta3">toTitle</span><span class="tt18 ttae">(</span>latestItem<span class="tt18 ttae">)</span><span class="tt18 ttae">;</span>
        <span class="tt18 tt1j">if</span> <span class="tt18 ttae">(</span><span class="tt18 tt1j">this</span><span class="tt18 ttae">.</span>title<span class="tt18 ttae">)</span> <span class="tt18 ttae">&#123;</span>
          <span class="tt18 tt1j">if</span> <span class="tt18 ttae">(</span>varArray<span class="tt18 ttae">.</span><span class="tt18 tta3">some</span><span class="tt18 ttae">(</span><span class="tt18 parameter">_</span> <span class="tt18 ttb0">=></span> _ <span class="tt18 ttb0">===</span> <span class="tt18 tt3z">'layout'</span> <span class="tt18 ttb0">||</span> _ <span class="tt18 ttb0">===</span> <span class="tt18 tt3z">'components'</span><span class="tt18 ttae">)</span><span class="tt18 ttae">)</span> <span class="tt18 ttae">&#123;</span>
            <span class="tt18 tt1j">const</span> name <span class="tt18 ttb0">=</span> varArray<span class="tt18 ttae">[</span><span class="tt18 ttap">0</span><span class="tt18 ttae">]</span> <span class="tt18 ttb0">===</span> <span class="tt18 tt3z">'components'</span> <span class="tt18 ttb0">?</span> varArray<span class="tt18 ttae">[</span><span class="tt18 ttap">0</span><span class="tt18 ttae">]</span><span class="tt18 ttae">.</span><span class="tt18 tta3">slice</span><span class="tt18 ttae">(</span><span class="tt18 ttap">0</span><span class="tt18 ttae">,</span> <span class="tt18 ttb0">-</span><span class="tt18 ttap">1</span><span class="tt18 ttae">)</span> <span class="tt18 ttae">:</span> varArray<span class="tt18 ttae">[</span><span class="tt18 ttap">0</span><span class="tt18 ttae">]</span><span class="tt18 ttae">;</span>
            <span class="tt18 tt1j">this</span><span class="tt18 ttae">.</span>titleService<span class="tt18 ttae">.</span><span class="tt18 tta3">setTitle</span><span class="tt18 ttae">(</span><span class="tt18 template-string"><span class="tt18 tt3z">`</span><span class="tt18 interpolation"><span class="tt18 interpolation-punctuation ttae">$&#123;</span><span class="tt18 tt1j">this</span><span class="tt18 ttae">.</span>title<span class="tt18 interpolation-punctuation ttae">&#125;</span></span><span class="tt18 tt3z"> Angular </span><span class="tt18 interpolation"><span class="tt18 interpolation-punctuation ttae">$&#123;</span>name<span class="tt18 interpolation-punctuation ttae">&#125;</span></span><span class="tt18 tt3z"> | </span><span class="tt18 interpolation"><span class="tt18 interpolation-punctuation ttae">$&#123;</span><span class="tt18 tt1j">this</span><span class="tt18 ttae">.</span>defaultTitle<span class="tt18 interpolation-punctuation ttae">&#125;</span></span><span class="tt18 tt3z">`</span></span><span class="tt18 ttae">)</span><span class="tt18 ttae">;</span>
          <span class="tt18 ttae">&#125;</span> <span class="tt18 tt1j">else</span> <span class="tt18 tt1j">if</span> <span class="tt18 ttae">(</span>varArray<span class="tt18 ttae">.</span><span class="tt18 tta3">some</span><span class="tt18 ttae">(</span><span class="tt18 parameter">_</span> <span class="tt18 ttb0">=></span> _ <span class="tt18 ttb0">===</span> <span class="tt18 tt3z">'api'</span><span class="tt18 ttae">)</span><span class="tt18 ttae">)</span> <span class="tt18 ttae">&#123;</span>
            <span class="tt18 tt1j">this</span><span class="tt18 ttae">.</span>titleService<span class="tt18 ttae">.</span><span class="tt18 tta3">setTitle</span><span class="tt18 ttae">(</span><span class="tt18 template-string"><span class="tt18 tt3z">`</span><span class="tt18 interpolation"><span class="tt18 interpolation-punctuation ttae">$&#123;</span><span class="tt18 tt1j">this</span><span class="tt18 ttae">.</span>title<span class="tt18 interpolation-punctuation ttae">&#125;</span></span><span class="tt18 tt3z"> API | </span><span class="tt18 interpolation"><span class="tt18 interpolation-punctuation ttae">$&#123;</span><span class="tt18 tt1j">this</span><span class="tt18 ttae">.</span>defaultTitle<span class="tt18 interpolation-punctuation ttae">&#125;</span></span><span class="tt18 tt3z">`</span></span><span class="tt18 ttae">)</span><span class="tt18 ttae">;</span>
          <span class="tt18 ttae">&#125;</span> <span class="tt18 tt1j">else</span> <span class="tt18 ttae">&#123;</span>
            <span class="tt18 tt1j">this</span><span class="tt18 ttae">.</span>titleService<span class="tt18 ttae">.</span><span class="tt18 tta3">setTitle</span><span class="tt18 ttae">(</span><span class="tt18 template-string"><span class="tt18 tt3z">`</span><span class="tt18 interpolation"><span class="tt18 interpolation-punctuation ttae">$&#123;</span><span class="tt18 tt1j">this</span><span class="tt18 ttae">.</span>title<span class="tt18 interpolation-punctuation ttae">&#125;</span></span><span class="tt18 tt3z"> | </span><span class="tt18 interpolation"><span class="tt18 interpolation-punctuation ttae">$&#123;</span><span class="tt18 tt1j">this</span><span class="tt18 ttae">.</span>defaultTitle<span class="tt18 interpolation-punctuation ttae">&#125;</span></span><span class="tt18 tt3z">`</span></span><span class="tt18 ttae">)</span><span class="tt18 ttae">;</span>
          <span class="tt18 ttae">&#125;</span>
        <span class="tt18 ttae">&#125;</span> <span class="tt18 tt1j">else</span> <span class="tt18 ttae">&#123;</span>
          <span class="tt18 tt1j">this</span><span class="tt18 ttae">.</span>titleService<span class="tt18 ttae">.</span><span class="tt18 tta3">setTitle</span><span class="tt18 ttae">(</span><span class="tt18 tt1j">this</span><span class="tt18 ttae">.</span>defaultTitle<span class="tt18 ttae">)</span><span class="tt18 ttae">;</span>
        <span class="tt18 ttae">&#125;</span>
      <span class="tt18 ttae">&#125;</span> <span class="tt18 tt1j">else</span> <span class="tt18 ttae">&#123;</span>
        <span class="tt18 tt1j">this</span><span class="tt18 ttae">.</span>title <span class="tt18 ttb0">=</span> <span class="tt18 tt3z">''</span><span class="tt18 ttae">;</span>
        <span class="tt18 tt1j">this</span><span class="tt18 ttae">.</span>titleService<span class="tt18 ttae">.</span><span class="tt18 tta3">setTitle</span><span class="tt18 ttae">(</span><span class="tt18 tt1j">this</span><span class="tt18 ttae">.</span>defaultTitle<span class="tt18 ttae">)</span><span class="tt18 ttae">;</span>
      <span class="tt18 ttae">&#125;</span>

      <span class="tt18 tt1j">this</span><span class="tt18 ttae">.</span>_ads<span class="tt18 ttae">.</span><span class="tt18 tta3">update</span><span class="tt18 ttae">(</span>val<span class="tt18 ttae">,</span> <span class="tt18 tt1j">this</span><span class="tt18 ttae">.</span>_pageContent<span class="tt18 ttae">,</span> <span class="tt18 tt1j">this</span><span class="tt18 ttae">.</span>_theme<span class="tt18 ttae">)</span><span class="tt18 ttae">;</span>
      <span class="tt18 tt1j">this</span><span class="tt18 ttae">.</span>_cd<span class="tt18 ttae">.</span><span class="tt18 tta3">markForCheck</span><span class="tt18 ttae">(</span><span class="tt18 ttae">)</span><span class="tt18 ttae">;</span>
    <span class="tt18 ttae">&#125;</span>
    <span class="tt18 tt1j">if</span> <span class="tt18 ttae">(</span>Platform<span class="tt18 ttae">.</span>isBrowser <span class="tt18 ttb0">&amp;&amp;</span> environment<span class="tt18 ttae">.</span>production<span class="tt18 ttae">)</span> <span class="tt18 ttae">&#123;</span>
      <span class="tt18 tta3">ga</span><span class="tt18 ttae">(</span><span class="tt18 tt3z">'set'</span><span class="tt18 ttae">,</span> <span class="tt18 tt3z">'page'</span><span class="tt18 ttae">,</span> <span class="tt18 tt1j">this</span><span class="tt18 ttae">.</span>_location<span class="tt18 ttae">.</span><span class="tt18 tta3">path</span><span class="tt18 ttae">(</span><span class="tt18 boolean">true</span><span class="tt18 ttae">)</span> <span class="tt18 ttb0">||</span> <span class="tt18 tt3z">'/'</span><span class="tt18 ttae">)</span><span class="tt18 ttae">;</span>
      <span class="tt18 tta3">ga</span><span class="tt18 ttae">(</span><span class="tt18 tt3z">'send'</span><span class="tt18 ttae">,</span> <span class="tt18 tt3z">'pageview'</span><span class="tt18 ttae">)</span><span class="tt18 ttae">;</span>
    <span class="tt18 ttae">&#125;</span>
  <span class="tt18 ttae">&#125;</span>
  <span class="tt18 tt1j">get</span> <span class="tt18 tta3">route</span><span class="tt18 ttae">(</span><span class="tt18 ttae">)</span> <span class="tt18 ttae">&#123;</span>
    <span class="tt18 tt1j">return</span> <span class="tt18 tt1j">this</span><span class="tt18 ttae">.</span>_route<span class="tt18 ttae">;</span>
  <span class="tt18 ttae">&#125;</span>
  <span class="tt18 tt1j">constructor</span><span class="tt18 ttae">(</span>
    <span class="tt18 parameter"><span class="tt18 tt1j">private</span> titleService<span class="tt18 ttae">:</span> Title<span class="tt18 ttae">,</span>
    <span class="tt18 tt1j">private</span> _pageContent<span class="tt18 ttae">:</span> PageContentComponent<span class="tt18 ttae">,</span>
    <span class="tt18 tt1j">private</span> _location<span class="tt18 ttae">:</span> Location<span class="tt18 ttae">,</span>
    <span class="tt18 tt1j">private</span> _cd<span class="tt18 ttae">:</span> ChangeDetectorRef<span class="tt18 ttae">,</span>
    <span class="tt18 tt1j">private</span> _theme<span class="tt18 ttae">:</span> LyTheme2<span class="tt18 ttae">,</span>
    <span class="tt18 tt1j">private</span> _ads<span class="tt18 ttae">:</span> Ads</span>
  <span class="tt18 ttae">)</span> <span class="tt18 ttae">&#123;</span> <span class="tt18 ttae">&#125;</span>

  <span class="tt18 tta3">ngOnInit</span><span class="tt18 ttae">(</span><span class="tt18 ttae">)</span> <span class="tt18 ttae">&#123;</span>
  <span class="tt18 ttae">&#125;</span>

<span class="tt18 ttae">&#125;</span>

<span class="tt18 tt1j">function</span> <span class="tt18 tta3">toTitle</span><span class="tt18 ttae">(</span><span class="tt18 parameter">str<span class="tt18 ttae">:</span> <span class="tt18 ttcj">string</span></span><span class="tt18 ttae">)</span> <span class="tt18 ttae">&#123;</span>
  <span class="tt18 tt1j">if</span> <span class="tt18 ttae">(</span><span class="tt18 ttb0">!</span>str<span class="tt18 ttae">)</span> <span class="tt18 ttae">&#123;</span>
    <span class="tt18 tt1j">return</span> str<span class="tt18 ttae">;</span>
  <span class="tt18 ttae">&#125;</span>
  <span class="tt18 tt1j">return</span> str<span class="tt18 ttae">.</span><span class="tt18 tta3">charAt</span><span class="tt18 ttae">(</span><span class="tt18 ttap">0</span><span class="tt18 ttae">)</span><span class="tt18 ttae">.</span><span class="tt18 tta3">toUpperCase</span><span class="tt18 ttae">(</span><span class="tt18 ttae">)</span> <span class="tt18 ttb0">+</span> str<span class="tt18 ttae">.</span><span class="tt18 tta3">slice</span><span class="tt18 ttae">(</span><span class="tt18 ttap">1</span><span class="tt18 ttae">)</span><span class="tt18 ttae">.</span><span class="tt18 tta3">replace</span><span class="tt18 ttae">(</span><span class="tt18 regex">/\-/g</span><span class="tt18 ttae">,</span> <span class="tt18 tt3z">' '</span><span class="tt18 ttae">)</span><span class="tt18 ttae">;</span>
<span class="tt18 ttae">&#125;</span>
</pre></div>